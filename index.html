<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Épico de KPIs</title>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Tipografías -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    /* Reset y tipografía */
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family:'Montserrat',sans-serif;
      background: linear-gradient(135deg,#4a90e2,#8e44ad);
      color:#f0f0f0;
      padding:20px;
    }
    h1,h2 { font-family:'Cinzel',serif; color:#fff; text-shadow:2px 2px 4px rgba(0,0,0,0.5); }
    .header { text-align:center; margin-bottom:30px; }
    .header p { color:#e0e0e0; margin-top:8px; }
    .underline { width:80%; margin:20px auto; border-bottom:2px solid rgba(255,255,255,0.5); }
    .cards {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:20px;
    }
    .card {
      background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.2);
      border-radius:12px;
      padding:20px;
      text-align:center;
      box-shadow:0 8px 16px rgba(0,0,0,0.3);
      backdrop-filter:blur(5px);
    }
    .card h2 { font-size:1.1rem; margin-bottom:10px; }
    .card p { font-size:1.8rem; font-weight:600; }
    #charts {
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:30px;
      margin-top:40px;
    }
    canvas {
      background:rgba(255,255,255,0.1);
      border-radius:12px;
      padding:20px;
      box-shadow:0 8px 16px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

  <div class="header">
    <h1>Dashboard Épico de KPIs</h1>
    <p>Visión épica de tu negocio</p>
    <div class="underline"></div>
  </div>

  <div class="cards">
    <div class="card"><h2>Total de Solicitudes</h2><p id="total">–</p></div>
    <div class="card"><h2>Solicitudes Aprobadas</h2><p id="approved">–</p></div>
    <div class="card"><h2>Solicitudes Rechazadas</h2><p id="rejected">–</p></div>
    <div class="card"><h2>Tasa de Aprobación</h2><p id="rate">–</p></div>
    <div class="card"><h2>Valor Medio de Pedido (AOV)</h2><p id="aov">–</p></div>
    <div class="card"><h2>Producto con Más Devoluciones</h2><p id="topReturns">–</p></div>
    <div class="card"><h2>Motivo Principal de Devolución</h2><p id="topReason">–</p></div>
    <div class="card"><h2>Producto Más Vendido</h2><p id="bestSeller">–</p></div>
    <div class="card"><h2>Razón de Elección del Más Vendido</h2><p id="whyBest">–</p></div>
    <div class="card"><h2>Turnos Hoy / Semana</h2><p id="shifts">–</p></div>
    <div class="card"><h2>Turnos Efectivos (%)</h2><p id="efficiency">–</p></div>
    <div class="card"><h2>Clientes Recurrentes</h2><p id="repeaters">–</p></div>
    <div class="card"><h2>Devoluciones Totales</h2><p id="returnsTotal">–</p></div>
    <div class="card"><h2>Reclamos Activos</h2><p id="activeClaims">–</p></div>
    <div class="card"><h2>Tiempo Medio Respuesta</h2><p id="responseTime">–</p></div>
    <div class="card"><h2>Coste por Adquisición (CAC)</h2><p id="cac">–</p></div>
    <div class="card"><h2>Tasa de Recompra</h2><p id="rebuyRate">–</p></div>
    <div class="card"><h2>Tasa de Devolución</h2><p id="returnRate">–</p></div>
    <div class="card"><h2>Tickets Resueltos 1° Contacto</h2><p id="firstContact">–</p></div>
  </div>

  <div id="charts">
    <canvas id="chartShifts"></canvas>
    <canvas id="chartSales"></canvas>
    <canvas id="chartReturnsByProduct"></canvas>
    <canvas id="chartReasons"></canvas>
  </div>

  <script>
    // ===== Datos de prueba (mock) =====
    const dataMock = {
      total: 320,
      approved: 240,
      rejected: 80,
      rate: 75.0,
      aov: 45.60,
      topReturns: 'Bolsa 40x50',
      topReason: 'Producto roto',
      bestSeller: 'Caja de regalo',
      whyBest: 'Packaging atractivo',
      shifts: '18 / 25',
      efficiency: 72,
      repeaters: 54,
      returnsTotal: 98,
      activeClaims: 12,
      responseTime: '2h 30m',
      cac: '$3.20',
      rebuyRate: 28,
      returnRate: 30,
      firstContact: 85,
      shiftsByDay: [
        { day:'Lun', count:5 },
        { day:'Mar', count:7 },
        { day:'Mié', count:4 },
        { day:'Jue', count:6 },
        { day:'Vie', count:8 },
        { day:'Sáb', count:3 },
        { day:'Dom', count:2 },
      ],
      salesByProduct: [
        { product:'Caja de regalo', count:120 },
        { product:'Set de tazas', count:80 },
        { product:'Mochila', count:60 },
      ],
      returnsByProduct: [
        { product:'Bolsa 40x50', count:30 },
        { product:'Camiseta', count:20 },
        { product:'Taza', count:10 },
      ],
      reasons: [
        { reason:'Producto roto', count:30 },
        { reason:'Talla equivocada', count:25 },
        { reason:'Color distinto', count:15 },
      ],
    };

    function renderKPIs(d) {
      document.getElementById('total').textContent = d.total;
      document.getElementById('approved').textContent = d.approved;
      document.getElementById('rejected').textContent = d.rejected;
      document.getElementById('rate').textContent = d.rate.toFixed(1)+'%';
      document.getElementById('aov').textContent = '$'+d.aov.toFixed(2);
      document.getElementById('topReturns').textContent = d.topReturns;
      document.getElementById('topReason').textContent = d.topReason;
      document.getElementById('bestSeller').textContent = d.bestSeller;
      document.getElementById('whyBest').textContent = d.whyBest;
      document.getElementById('shifts').textContent = d.shifts;
      document.getElementById('efficiency').textContent = d.efficiency+'%';
      document.getElementById('repeaters').textContent = d.repeaters;
      document.getElementById('returnsTotal').textContent = d.returnsTotal;
      document.getElementById('activeClaims').textContent = d.activeClaims;
      document.getElementById('responseTime').textContent = d.responseTime;
      document.getElementById('cac').textContent = d.cac;
      document.getElementById('rebuyRate').textContent = d.rebuyRate+'%';
      document.getElementById('returnRate').textContent = d.returnRate+'%';
      document.getElementById('firstContact').textContent = d.firstContact+'%';

      // Gráfico turnos por día
      new Chart(document.getElementById('chartShifts'), {
        type:'bar',
        data:{
          labels:d.shiftsByDay.map(x=>x.day),
          datasets:[{
            label:'Turnos',
            data:d.shiftsByDay.map(x=>x.count),
            backgroundColor:'#4caf50'
          }]
        }
      });

      // Gráfico ventas por producto (torta)
      new Chart(document.getElementById('chartSales'), {
        type:'doughnut',
        data:{
          labels:d.salesByProduct.map(x=>x.product),
          datasets:[{
            data:d.salesByProduct.map(x=>x.count),
            backgroundColor:['#3498db','#9b59b6','#f1c40f']
          }]
        }
      });

      // Gráfico devolutions by product
      new Chart(document.getElementById('chartReturnsByProduct'), {
        type:'bar',
        data:{
          labels:d.returnsByProduct.map(x=>x.product),
          datasets:[{
            label:'Devoluciones',
            data:d.returnsByProduct.map(x=>x.count),
            backgroundColor:'#e74c3c'
          }]
        }
      });

      // Gráfico motivos
      new Chart(document.getElementById('chartReasons'), {
        type:'horizontalBar',
        data:{
          labels:d.reasons.map(x=>x.reason),
          datasets:[{
            label:'Motivos',
            data:d.reasons.map(x=>x.count),
            backgroundColor:'#f39c12'
          }]
        },
        options:{ scales:{ x:{ beginAtZero:true } } }
      });
    }

    // Renderizamos con mock
    renderKPIs(dataMock);
  </script>

</body>
</html>
